{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Life Event Frame",
  "description": "Canonical JSON schema for life-event frames (`event.life`). Covers biographical episodes such as education, appointments, awards, marriages, and relocations, as a thin wrapper over a generic Event plus life-specific fields.",
  "type": "object",
  "additionalProperties": false,

  "properties": {
    "frame_type": {
      "description": "Frame type discriminator. Must be `event.life`.",
      "type": "string",
      "const": "event.life"
    },

    "main_event": {
      "description": "Underlying core event representing the life episode.",
      "$ref": "#/definitions/Event"
    },

    "subject_person": {
      "description": "The person whose life event this is (the biographical subject).",
      "$ref": "#/definitions/Entity"
    },

    "life_event_kind": {
      "description": "Coarse label for the kind of life event. Canonical values (when normalized) include `education`, `appointment`, `award`, `marriage`, `relocation`, `birth`, `death`, but arbitrary non-empty values are allowed.",
      "type": ["string", "null"]
    },

    "overall_timespan": {
      "description": "Overall timespan of the life event. If omitted, may default to `main_event.time`.",
      "oneOf": [
        { "type": "null" },
        { "$ref": "#/definitions/TimeSpan" }
      ]
    },

    "institution": {
      "description": "Institution, employer, school, awarding body, or other organization centrally involved in the life event (university, company, court, academy, etc.).",
      "oneOf": [
        { "type": "null" },
        { "$ref": "#/definitions/Entity" }
      ]
    },

    "partner_persons": {
      "description": "Other persons directly linked by the life event (spouse/partner for marriages, co-recipients for an award, co-appointees, etc.).",
      "type": "array",
      "items": { "$ref": "#/definitions/Entity" }
    },

    "from_location": {
      "description": "Origin location for relocation-type events (where the subject moved from).",
      "oneOf": [
        { "type": "null" },
        { "$ref": "#/definitions/Location" }
      ]
    },

    "to_location": {
      "description": "Destination location for relocation-type events (where the subject moved to).",
      "oneOf": [
        { "type": "null" },
        { "$ref": "#/definitions/Location" }
      ]
    },

    "attributes": {
      "description": "Life-event-specific attributes that are common but not mandatory across all kinds of events. Known keys are typed below; other keys are allowed for project-specific extensions.",
      "type": "object",
      "properties": {
        "degree_lemmas": {
          "description": "Degree or qualification labels for education events (lemma-like, e.g. `bachelor`, `master`, `phd`).",
          "type": "array",
          "items": { "type": "string" }
        },
        "field_of_study_lemmas": {
          "description": "Fields of study (e.g. `physics`, `history`, `computer science`) as lemma-like labels.",
          "type": "array",
          "items": { "type": "string" }
        },
        "position_title": {
          "description": "Title of a position or office for appointment-type events (e.g. `professor of physics`, `prime minister`).",
          "type": ["string", "null"]
        },
        "award_entity": {
          "description": "Award or prize entity, if the life event is an award or honour.",
          "oneOf": [
            { "type": "null" },
            { "$ref": "#/definitions/Entity" }
          ]
        },
        "award_reason": {
          "description": "Short description of the reason or citation for the award/honour, in a neutral, paraphrasable form.",
          "type": ["string", "null"]
        },
        "marriage_type": {
          "description": "Optional qualitative label for the marriage/partnership (e.g. `civil`, `religious`, `registered_partnership`).",
          "type": ["string", "null"]
        },
        "children_count": {
          "description": "Number of children associated with the union if explicitly stated, when relevant.",
          "type": ["integer", "null"],
          "minimum": 0
        },
        "notes": {
          "description": "Free-form notes for narrative hints that do not fit into structured fields.",
          "type": ["string", "null"]
        }
      },
      "additionalProperties": true
    },

    "extra": {
      "description": "Opaque metadata bag for original source structures (raw JSON, Wikidata statements, provenance, debug info, etc.). Not intended for direct surface realization.",
      "type": "object",
      "additionalProperties": true
    }
  },

  "required": [
    "frame_type",
    "main_event",
    "subject_person"
  ],

  "definitions": {
    "Entity": {
      "description": "Generic entity object (person, organization, place, work, award, etc.). At minimum a name; additional typing and metadata are allowed.",
      "type": "object",
      "properties": {
        "id": {
          "description": "Stable identifier (e.g. Wikidata QID, internal ID).",
          "type": ["string", "null"]
        },
        "name": {
          "description": "Human-readable label for the entity.",
          "type": "string"
        },
        "entity_type": {
          "description": "High-level type hint (e.g. `person`, `organization`, `place`, `work`, `award`).",
          "type": ["string", "null"]
        },
        "human": {
          "description": "Whether this entity represents a human person.",
          "type": ["boolean", "null"]
        },
        "gender": {
          "description": "Optional gender tag for human entities (e.g. `male`, `female`, `nonbinary`, project-specific).",
          "type": ["string", "null"]
        },
        "features": {
          "description": "Free-form feature map for entity-level attributes.",
          "type": "object",
          "additionalProperties": true
        },
        "extra": {
          "description": "Extra metadata and provenance.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": ["name"],
      "additionalProperties": true
    },

    "TimeSpan": {
      "description": "Coarse time span or partial date, designed to tolerate partial information.",
      "type": "object",
      "properties": {
        "start_year": { "type": ["integer", "null"] },
        "start_month": { "type": ["integer", "null"], "minimum": 1, "maximum": 12 },
        "start_day": { "type": ["integer", "null"], "minimum": 1, "maximum": 31 },
        "end_year": { "type": ["integer", "null"] },
        "end_month": { "type": ["integer", "null"], "minimum": 1, "maximum": 12 },
        "end_day": { "type": ["integer", "null"], "minimum": 1, "maximum": 31 },
        "approximate": {
          "description": "If true, the span is approximate or uncertain.",
          "type": ["boolean", "null"]
        }
      },
      "additionalProperties": true
    },

    "Location": {
      "description": "Lightweight location object for events (city, country, region, building, etc.).",
      "type": "object",
      "properties": {
        "name": {
          "description": "Name of the location.",
          "type": "string"
        },
        "kind": {
          "description": "Optional classification (e.g. `city`, `country`, `region`, `building`).",
          "type": ["string", "null"]
        },
        "country_code": {
          "description": "Optional country code (e.g. ISO 3166-1 alpha-2).",
          "type": ["string", "null"]
        },
        "admin_hierarchy": {
          "description": "Optional list of enclosing administrative units (e.g. region, country).",
          "type": "array",
          "items": { "type": "string" }
        },
        "features": {
          "description": "Additional geographic codes or metadata.",
          "type": "object",
          "additionalProperties": true
        },
        "extra": {
          "description": "Extra metadata not part of core semantics.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": ["name"],
      "additionalProperties": true
    },

    "Event": {
      "description": "Generic semantic event object backing all event frames. Used here to represent the life episode itself.",
      "type": "object",
      "properties": {
        "id": {
          "description": "Optional stable identifier for the event.",
          "type": ["string", "null"]
        },
        "event_type": {
          "description": "High-level label for the event (e.g. `life_event`, `marriage`, `graduation`, `appointment`, `award`, or project-specific label).",
          "type": "string"
        },
        "participants": {
          "description": "Mapping from role label to entity (e.g. `subject`, `partner`, `institution`, `awarding_body`).",
          "type": "object",
          "additionalProperties": { "$ref": "#/definitions/Entity" }
        },
        "time": {
          "description": "When the event occurred.",
          "oneOf": [
            { "type": "null" },
            { "$ref": "#/definitions/TimeSpan" }
          ]
        },
        "location": {
          "description": "Primary location of the event.",
          "oneOf": [
            { "type": "null" },
            { "$ref": "#/definitions/Location" }
          ]
        },
        "properties": {
          "description": "Additional semantic properties of the event (instrument, manner, cause, etc.).",
          "type": "object",
          "additionalProperties": true
        },
        "extra": {
          "description": "Metadata and provenance not part of semantic content.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": ["event_type"],
      "additionalProperties": true
    }
  }
}
