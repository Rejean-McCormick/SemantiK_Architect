{
  "$schema": "https://json-schema.org/draft/2020-12/schema#",
  "$id": "schemas/frames/relational_spatial_relation.schema.json",
  "title": "SpatialRelationFrame",
  "description": "Schema for SpatialRelationFrame, representing spatial relations between entities/places (e.g. X is in/near/north of Y).",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "frame_type": {
      "type": "string",
      "const": "relation.spatial",
      "description": "Canonical frame family identifier; must be \"relation.spatial\" for spatial relation frames."
    },
    "id": {
      "type": [
        "string",
        "null"
      ],
      "description": "Optional stable identifier for this relation instance (e.g. a row ID or source key)."
    },
    "subject": {
      "description": "Entity/place being located (X).",
      "anyOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/$defs/entity"
        }
      ]
    },
    "reference": {
      "description": "Reference entity/place (Y), often a country, region, or other geographic feature.",
      "anyOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/$defs/entity"
        }
      ]
    },
    "relation": {
      "type": "string",
      "description": "Coarse relation label such as \"in\", \"within\", \"inside\", \"near\", \"adjacent_to\", \"north_of\", \"on\", etc."
    },
    "distance": {
      "description": "Optional numeric distance between subject and reference, represented as a Quantity-like object (e.g. 50 km).",
      "anyOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/$defs/quantity"
        }
      ]
    },
    "region_lemma": {
      "type": [
        "string",
        "null"
      ],
      "description": "Optional lemma describing a subregion or part of the reference (e.g. \"northern\", \"central\")."
    },
    "time": {
      "description": "Optional time span indicating when the relation holds (for time-sensitive locative relations).",
      "anyOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/$defs/time_span"
        }
      ]
    },
    "certainty": {
      "type": [
        "number",
        "null"
      ],
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Optional confidence value in [0, 1]; 1.0 means full confidence."
    },
    "source_id": {
      "type": [
        "string",
        "null"
      ],
      "description": "Optional opaque identifier for the source statement or triple, useful for debugging / traceability."
    },
    "extra": {
      "type": "object",
      "description": "Free-form metadata bag for additional information not widely shared across projects.",
      "additionalProperties": true
    }
  },
  "required": [
    "frame_type",
    "subject",
    "reference",
    "relation"
  ],
  "$defs": {
    "entity": {
      "type": "object",
      "description": "Lightweight entity representation compatible with semantics.types.Entity.",
      "properties": {
        "id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Stable identifier for the entity (e.g. Wikidata QID)."
        },
        "name": {
          "type": [
            "string",
            "null"
          ],
          "description": "Canonical label or surface-form name of the entity."
        },
        "entity_type": {
          "type": [
            "string",
            "null"
          ],
          "description": "Optional coarse type label (e.g. \"country\", \"city\", \"river\")."
        },
        "extra": {
          "type": "object",
          "description": "Arbitrary metadata about the entity.",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "time_span": {
      "type": "object",
      "description": "Time span representation compatible with semantics.types.TimeSpan.",
      "properties": {
        "start_year": {
          "type": [
            "integer",
            "null"
          ]
        },
        "end_year": {
          "type": [
            "integer",
            "null"
          ]
        },
        "start_month": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1,
          "maximum": 12
        },
        "start_day": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1,
          "maximum": 31
        },
        "end_month": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1,
          "maximum": 12
        },
        "end_day": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1,
          "maximum": 31
        },
        "approximate": {
          "type": [
            "boolean",
            "null"
          ],
          "description": "True if the dates are approximate or inferred."
        },
        "extra": {
          "type": "object",
          "description": "Arbitrary metadata (e.g. full ISO strings, calendar system).",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "quantity": {
      "type": "object",
      "description": "Generic numeric quantity + unit + qualifier, compatible with semantics.common.quantity.Quantity.",
      "properties": {
        "kind": {
          "type": [
            "string",
            "null"
          ],
          "description": "Coarse semantic type of the quantity (e.g. \"measure\", \"count\", \"percentage\")."
        },
        "value": {
          "type": [
            "number",
            "null"
          ],
          "description": "Main numeric value, if available."
        },
        "min_value": {
          "type": [
            "number",
            "null"
          ],
          "description": "Optional lower bound."
        },
        "max_value": {
          "type": [
            "number",
            "null"
          ],
          "description": "Optional upper bound."
        },
        "qualifier": {
          "type": [
            "string",
            "null"
          ],
          "description": "Qualifier such as \"exact\", \"approximate\", \"at_least\", \"at_most\"."
        },
        "unit": {
          "description": "Optional unit object.",
          "anyOf": [
            {
              "type": "null"
            },
            {
              "$ref": "#/$defs/unit"
            }
          ]
        },
        "as_of": {
          "description": "Optional temporal anchor (year/date or similar). Represented loosely as any JSON value.",
          "nullable": true
        },
        "scope": {
          "type": [
            "string",
            "null"
          ],
          "description": "Optional textual scope, e.g. \"per capita\", \"within city limits\"."
        },
        "raw": {
          "type": [
            "string",
            "null"
          ],
          "description": "Optional raw string representation from the source."
        },
        "meta": {
          "type": "object",
          "description": "Arbitrary extra metadata for the quantity.",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "unit": {
      "type": "object",
      "description": "Measurement unit compatible with semantics.common.quantity.Unit.",
      "properties": {
        "code": {
          "type": "string",
          "description": "Canonical unit code (e.g. \"km\", \"km2\", \"USD\", \"person\", \"percent\")."
        },
        "name": {
          "type": [
            "string",
            "null"
          ],
          "description": "Optional human-readable unit name (e.g. \"kilometre\")."
        },
        "system": {
          "type": [
            "string",
            "null"
          ],
          "description": "Optional system label (e.g. \"SI\", \"USD\", \"EUR\", \"custom\")."
        },
        "per": {
          "type": [
            "string",
            "null"
          ],
          "description": "Optional \"per\" component for rate-like units (e.g. \"year\", \"km2\")."
        }
      },
      "required": [
        "code"
      ],
      "additionalProperties": true
    }
  }
}
